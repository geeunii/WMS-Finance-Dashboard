<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssg.wms.outbound.mappers.OutboundItemMapper">

    <!-- ✅ 출고품목 추가 -->
    <insert id="insertOutboundItem" parameterType="com.ssg.wms.outbound.domain.dto.OutboundItemDTO">
        INSERT INTO outboundItem (
        outboundRequest_ID,
        Product_ID,
        outboundQuantity
        )
        VALUES (
        #{outboundRequestId},
        #{productId},
        #{outboundQuantity}
        )
    </insert>

    <!-- ✅ 특정 출고요청에 대한 품목 목록 조회 -->
    <select id="selectOutboundItemsByRequestId"
            parameterType="long"
            resultType="com.ssg.wms.outbound.domain.dto.OutboundItemDTO">
        SELECT
        outbound_item_id,
        outboundRequest_ID,
        Product_ID,
        outboundQuantity
        FROM outboundItem
        WHERE outboundRequest_ID = #{outboundRequestId}
    </select>

    <!-- ✅ 출고품목 수정 -->
    <update id="updateOutboundItem" parameterType="com.ssg.wms.outbound.domain.dto.OutboundItemDTO">
        UPDATE outboundItem
        SET
        Product_ID = #{productId},
        outboundQuantity = #{outboundQuantity}
        WHERE outbound_item_id = #{outboundItemId}
        AND outboundRequest_ID = #{outboundRequestId}
    </update>

    <!-- ✅ 특정 출고품목 삭제 -->
    <delete id="deleteOutboundItem" parameterType="long">
        DELETE FROM outboundItem
        WHERE outbound_item_id = #{outboundItemId}
    </delete>

    <!-- ✅ 특정 출고요청의 품목 전체 삭제 -->
    <delete id="deleteOutboundItemsByRequestId" parameterType="long">
        DELETE FROM outboundItem
        WHERE outboundRequest_ID = #{outboundRequestId}
    </delete>

</mapper>
