# 🔨 충돌 해결 상세 가이드

목차
* [충돌이란?](#충돌이란)
* [충돌 예방하기](#충돌-예방하기)
* [충돌 해결 방법](#충돌-해결-방법)
* [도구별 해결법](#도구별-해결법)
* [실전 예시](#실전-예시)
* [복잡한 충돌 상황](#복잡한-충돌-상황)
* [충돌 해결 체크리스트](#충돌-해결-체크리스트)
* [자주하는 실수](#자주하는-실수)
* [도움이 필요할 때](#도움이-필요할-때)
* [팁](#팁)

---

## 충돌이란?

### 충돌이 발생하는 이유

상황 예시:
1.  홍길동이 `login.js` 파일 10번 줄을 수정
    ```javascript
    console.log("홍길동 버전");
    ```
2.  김철수도 `login.js` 파일 10번 줄을 수정
    ```javascript
    console.log("김철수 버전");
    ```
3.  홍길동이 먼저 `develop`에 Merge
4.  김철수가 PR 생성 시 충돌 발생!
    → Git이 어떤 코드를 선택해야 할지 모름

### 충돌이 발생하는 경우

* ✅ 같은 파일의 **같은 줄**을 서로 다르게 수정
* ✅ 한 명은 파일 **수정**, 다른 한 명은 파일 **삭제**
* ❌ **다른 파일** 수정 (충돌 안 남!)
* ❌ **같은 파일의 다른 줄** 수정 (충돌 안 남! - Git이 자동으로 병합)

---

## 충돌 예방하기

### 1. 자주 동기화하기

```bash
# 매일 아침 루틴
git checkout develop
git pull origin develop

git checkout 내브랜치
git merge develop
````

  * **효과**: `develop`과의 차이를 최소화하여 충돌 가능성 감소

### 2\. 작은 단위로 자주 PR

  * **❌ 나쁜 예: 1주일치 작업을 한 번에 PR**
      * 100개 파일 수정
      * 충돌 발생 시 해결 어려움
  * **✅ 좋은 예: 기능 단위로 작은 PR**
      * 하루 1-2번 PR
      * 10-20개 파일 정도
      * 충돌 발생해도 해결 쉬움

### 3\. 작업 영역 분리

  * **팀원과 소통해서 같은 파일 동시 작업 피하기**
  * **예시:**
      * 홍길동: `login.js`, `login.css`
      * 김철수: `signup.js`, `signup.css`
      * 이영희: `dashboard.js`, `dashboard.css`

### 4\. 작업 시작 전 확인

```bash
# 항상 최신 코드에서 시작
git checkout develop
git pull origin develop
git checkout -b dev/개인 branch
```

-----

## 충돌 해결 방법

### Step 1: 충돌 확인

```bash
# develop과 병합 시도
git checkout develop
git pull origin develop
git checkout dev/개인 branch
git merge develop

# 충돌 발생 메시지
# Auto-merging login.js
# CONFLICT (content): Merge conflict in login.js
# Automatic merge failed; fix conflicts and then commit the result.
```

### Step 2: 충돌 파일 확인

```bash
git status

# 출력 예시:
# Unmerged paths:
#   (use "git add <file>..." to mark resolution)
#         both modified:   login.js
#         both modified:   utils.js
```

### Step 3: 충돌 파일 열기

```javascript
// login.js 파일 내용
function login() {
<<<<<<< HEAD
  // 내가 작성한 코드 (Current Change)
  console.log("내 버전");
  return authenticateUser();
=======
  // develop 브랜치의 코드 (Incoming Change)
  console.log("다른 사람 버전");
  return verifyUser();
>>>>>>> develop
}
```

  * **구조 설명:**
      * `<<<<<<< HEAD`: 내 코드 시작
      * `=======`: 구분선
      * `>>>>>>> develop`: 다른 코드 끝

### Step 4: 충돌 해결

```javascript
// ✅ 해결 방법 1: 내 코드 선택
function login() {
  console.log("내 버전");
  return authenticateUser();
}

// ✅ 해결 방법 2: 다른 코드 선택
function login() {
  console.log("다른 사람 버전");
  return verifyUser();
}

// ✅ 해결 방법 3: 두 코드 합치기
function login() {
  console.log("최종 버전");
  const result = authenticateUser();
  return verifyUser(result);
}
```

  * **⚠️ 중요: `<<<<<<<`, `=======`, `>>>>>>>` 표시는 모두 삭제\!**

### Step 5: 해결 완료

```bash
# 1. 수정한 파일 스테이징
git add login.js utils.js

# 2. 상태 확인
git status
# All conflicts fixed but you are still merging.

# 3. 병합 커밋
git commit -m "chore: develop 병합 및 충돌 해결"

# 4. 푸시
git push origin dev/개인 branch
```

-----

## 도구별 해결법

### VS Code (추천\!)

  * **장점**: 버튼 클릭으로 쉽게 해결
  * **사용법**:
    1.  충돌 파일 열기
    2.  다음 버튼들이 표시됨:
          * `Accept Current Change` (내 코드)
          * `Accept Incoming Change` (다른 코드)
          * `Accept Both Changes` (둘 다)
          * `Compare Changes` (비교)
    3.  적절한 버튼 클릭
    4.  저장
    5.  Source Control 탭 → Commit
  * **여러 충돌 파일이 있을 때**:
      * 좌측 Source Control → **Merge Changes** 섹션
      * 각 파일을 하나씩 해결

### GitHub Desktop

  * **사용법**:
    1.  충돌 발생 시 알림 표시
    2.  "Open in Visual Studio Code" 클릭
    3.  VS Code에서 해결
    4.  GitHub Desktop으로 돌아와서 "Continue merge" 클릭

### IntelliJ / WebStorm

  * **사용법**:
    1.  VCS → Git → Merge
    2.  충돌 파일 우클릭 → "Resolve Conflicts"
    3.  3-way merge 도구 열림
          * 왼쪽: 내 코드
          * 가운데: 최종 결과
          * 오른쪽: 다른 코드
    4.  화살표 버튼으로 선택
    5.  Apply 클릭

### 커맨드라인 (고급)

  * `vim` 에디터 사용:
    ```bash
    # 1. 충돌 파일 편집
    vim login.js

    # 2. 수정 후 저장
    :wq

    # 3. 스테이징
    git add login.js

    # 4. 계속 진행
    git merge --continue
    ```

-----

## 복잡한 충돌 상황

### 상황 1: 여러 파일에 충돌 발생

```bash
# 충돌 파일 목록 확인
git status

# Unmerged paths:
#   both modified:   login.js
#   both modified:   signup.js
#   both modified:   utils.js
#   both modified:   styles.css

# 전략: 하나씩 차근차근 해결
# 1. login.js 해결
code login.js  # VS Code로 열기
# 해결 후
git add login.js

# 2. signup.js 해결
code signup.js
git add signup.js

# ... 반복

# 모두 해결 후
git commit -m "chore: develop 병합 및 여러 파일 충돌 해결"
```

### 상황 2: 파일 삭제 충돌

```bash
# 에러 메시지:
# CONFLICT (modify/delete): oldFile.js deleted in develop 
# and modified in HEAD.

# 해결:
# 옵션 1: 파일 유지
git add oldFile.js

# 옵션 2: 파일 삭제
git rm oldFile.js

# 커밋
git commit -m "chore: 충돌 해결 - oldFile.js 삭제"
```

### 상황 3: 이진 파일 충돌 (이미지, PDF 등)

  * 이진 파일은 병합 불가 → 하나 선택해야 함

<!-- end list -->

```bash
# 내 파일 선택
git checkout --ours image.png
git add image.png

# 다른 파일 선택
git checkout --theirs image.png
git add image.png

# 커밋
git commit -m "chore: 이미지 충돌 해결"
```

-----

## 충돌 해결 체크리스트

  * **✅ 해결 전 체크**
      * [ ] 충돌 파일 목록 확인 (`git status`)
      * [ ] 각 충돌의 원인 파악
      * [ ] 필요시 팀원과 상의
  * **✅ 해결 중 체크**
      * [ ] 모든 `<<<<<<<`, `=======`, `>>>>>>>` 표시 제거
      * [ ] 코드가 정상 동작하는지 테스트
      * [ ] 중복 import 제거
      * [ ] 불필요한 코드 정리
  * **✅ 해결 후 체크**
      * [ ] 모든 충돌 파일 `git add` 완료
      * [ ] 커밋 메시지 작성 (`chore: 충돌 해결`)
      * [ ] Push 완료
      * [ ] GitHub PR에서 충돌 해결 확인

-----

## 자주하는 실수

  * **❌ 실수 1: 충돌 표시를 그대로 커밋**

    ```javascript
    // ❌ 이렇게 하면 안 됨!
    function login() {
    <<<<<<< HEAD
      return true;
    =======
      return false;
    >>>>>>> develop
    }
    ```

      * **결과**: 코드가 실행되지 않음\!

  * **❌ 실수 2: 한쪽만 선택해야 하는데 둘 다 넣기**

    ```javascript
    // ❌ 문맥상 하나만 있어야 하는데 둘 다
    const API_URL = "http://localhost:3000";
    const API_URL = "[https://api.production.com](https://api.production.com)";  // 중복!
    ```

  * **❌ 실수 3: 충돌 해결 후 테스트 안 함**

      * 충돌 해결 후 반드시 실행해보기\!

    <!-- end list -->

    ```bash
    npm start  # 또는 해당 프로젝트 실행 명령어
    ```

-----

## 도움이 필요할 때

### 혼자 해결이 어려운 경우

  * **팀원과 페어 코딩**
      * 화면 공유로 함께 해결
      * 서로 코드 의도 설명
  * **Git Master에게 요청**
      * @geeunii, @00parkyh
      * 복잡한 충돌은 함께 해결

### 충돌 취소하기

```bash
# 병합 작업 취소
git merge --abort

# 처음부터 다시 시작
git checkout develop
git pull origin develop
git checkout dev/개인 branch
# 천천히 다시 시도
```

-----

## 팁

### 💡 충돌 미리보기

```bash
# 병합 전에 충돌 여부 확인 (실제 병합 안 함)
git merge --no-commit --no-ff develop
git merge --abort  # 확인만 하고 취소
```

### 💡 특정 버전 일괄 선택

```bash
# 모든 충돌에서 내 코드 선택
git checkout --ours .
git add .

# 모든 충돌에서 다른 코드 선택
git checkout --theirs .
git add .

# ⚠️ 주의: 신중하게 사용!
```

### 💡 충돌 히스토리 확인

```bash
# 누가 언제 수정했는지 확인
git log --oneline --graph login.js

# 특정 줄의 수정 이력
git blame login.js
```

---
